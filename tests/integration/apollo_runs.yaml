- name: integration__telemetry
  cd: telemetry
  commands: TIMEOUT=200 ./runner.py
  infiles:
    - runner.py # runner script
    - server.py # server script
    - ../../../build_debug/tests/integration/telemetry/client # client binary
    - ../../../build_debug/tests/manual/kvstore_console # kvstore console binary

- name: integration__ssl
  cd: ssl
  commands: ./runner.sh
  infiles:
    - runner.sh # runner script
    - ../../../build_debug/tests/integration/ssl/tester # tester binary
  enable_network: true

- name: integration__transactions
  cd: transactions
  commands: ./runner.sh
  infiles:
    - runner.sh # runner script
    - ../../../build_debug/memgraph # memgraph binary
    - ../../../build_debug/tests/integration/transactions/tester # tester binary

- name: integration__kafka
  cd: kafka
  commands: ./runner.sh
  infiles:
    - runner.sh # runner script
    - transform.py # transform script
    - ../../../build_debug/memgraph # memgraph binary
    - ../../../build_debug/kafka.py # kafka script
    - ../../../build_debug/tests/integration/kafka/tester # tester binary
  enable_network: true

- name: integration__auth
  cd: auth
  commands: TIMEOUT=820 ./runner.py
  infiles:
    - runner.py # runner script
    - ../../../build_debug/memgraph # memgraph binary
    - ../../../build_debug/tests/integration/auth/checker # checker binary
    - ../../../build_debug/tests/integration/auth/tester # tester binary

- name: integration__audit
  cd: audit
  commands: ./runner.py
  infiles:
    - runner.py # runner script
    - ../../../build_debug/memgraph # memgraph binary
    - ../../../build_debug/tests/integration/audit/tester # tester binary

- name: integration__ldap
  cd: ldap
  commands: |
    ./prepare.sh
    ./runner.py
  infiles:
    - prepare.sh # preparation script
    - runner.py # runner script
    - schema.ldif # schema file
    - ve3 # Python virtual environment
    - ../../../src/auth/reference_modules/ldap.py # LDAP auth module
    - ../../../build_debug/memgraph # memgraph binary
    - ../../../build_debug/tests/integration/ldap/tester # tester binary
  enable_network: true

- name: integration__ha_basic
  cd: ha/basic
  commands: TIMEOUT=480 ./runner.py
  infiles:
    - runner.py # runner script
    - raft.json # raft configuration
    - ../ha_test.py # raft test base module
    - ../../../../build_debug/memgraph_ha # memgraph ha binary
    - ../../../../build_debug/tests/integration/ha/basic/tester # tester binary

- name: integration__ha_constraints
  cd: ha/constraints
  commands: ./runner.py
  infiles:
    - runner.py # runner script
    - raft.json # raft configuration
    - ../ha_test.py # raft test base module
    - ../../../../build_debug/memgraph_ha # memgraph ha binary
    - ../../../../build_debug/tests/integration/ha/constraints/tester # tester binary

- name: integration__ha_index
  cd: ha/index
  commands: ./runner.py
  infiles:
    - runner.py # runner script
    - raft.json # raft configuration
    - ../ha_test.py # raft test base module
    - ../../../../build_debug/memgraph_ha # memgraph ha binary
    - ../../../../build_debug/tests/integration/ha/index/tester # tester binary

- name: integration__ha_large_log_entries
  cd: ha/large_log_entries
  commands: TIMEOUT=600 ./runner.py
  infiles:
    - runner.py # runner script
    - raft.json # raft configuration
    - ../ha_test.py # raft test base module
    - ../../../../build_debug/memgraph_ha # memgraph ha binary
    - ../../../../build_debug/tests/integration/ha/large_log_entries/tester # tester binary

- name: integration__ha_leader_election
  cd: ha/leader_election
  commands: TIMEOUT=300 ./runner.py
  infiles:
    - runner.py # runner script
    - raft.json # raft configuration
    - ../ha_test.py # raft test base module
    - ../../../../build_debug/memgraph_ha # memgraph ha binary
    - ../../../../build_debug/tests/integration/ha/leader_election/tester # tester binary

- name: integration__ha_log_compaction
  cd: ha/log_compaction
  commands: ./runner.py
  infiles:
    - runner.py # runner script
    - raft.json # raft configuration
    - ../ha_test.py # raft test base module
    - ../../../../build_debug/memgraph_ha # memgraph ha binary
    - ../../../../build_debug/tests/manual/ha_client # tester binary

- name: integration__ha_term_updates
  cd: ha/term_updates
  commands: ./runner.py
  infiles:
    - runner.py # runner script
    - raft.json # raft configuration
    - ../ha_test.py # raft test base module
    - ../../../../build_debug/memgraph_ha # memgraph ha binary
    - ../../../../build_debug/tests/integration/ha/term_updates/tester # tester binary
